define(["vendor/class"],function(){return EventEmiter=Class.extend({init:function(){this.eventListeners={}},on:function(b,c){if("function"==typeof c){var a=b.toLowerCase().replace(/\s+/," ").split(" "),d=this.eventListeners;_.each(a,function(a){_.isArray(d[a])||(d[a]=[]);d[a].push(c)})}return this},trigger:function(b,c){var a,d=this;a=_.isObject(b)?b:{type:b};a.type=(a.type||"").toLowerCase();_.isObject(c)&&_.extend(a,c);_.each(this.eventListeners[a.type]||[],function(b){try{[_.extend(a)].concat(c),
b.apply(d,[_.extend(a)].concat(c))}catch(e){}});return this}})});