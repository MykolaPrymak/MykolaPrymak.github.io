define("player",["particle"],function(e){return Player=e.extend({init:function(a,b){this._super(a,b);this.reset();this.speed=a/125;this.enabled=!1},play:function(){this.enabled=!0;this.reset()},stop:function(){this.enabled=!1},reset:function(){this.x=this.maxWidth/2;this.y=this.maxHeight/2;this.radius=7;this.dstX=this.x;this.dstY=this.y;this.speedY=this.speedX=0;this.dead=!1},draw:function(a){this.enabled&&this._super(a)},tick:function(){if(this.dstX!==this.x||this.dstY!==this.y){(Math.abs(this.x-
this.dstX)<this.radius||Math.abs(this.y-this.dstY)<this.radius)&&this.moveTo(this.dstX,this.dstY);if(Math.abs(this.x-this.dstX)<this.speedX)this.speedX=0,this.x=this.dstX;if(Math.abs(this.y-this.dstY)<this.speedY)this.speedY=0,this.y=this.dstY;this.x+=this.speedX;this.y+=this.speedY}return this},moveTo:function(a,b){a=~~a;b=~~b;a<this.radius?a=this.radius:a>this.maxWidth-this.radius&&(a=this.maxWidth-this.radius);b<this.radius?b=this.radius:b>this.maxHeight-this.radius&&(b=this.maxHeight-this.radius);
this.dstX=a;this.dstY=b;var c=Math.abs(a-this.x),d=Math.abs(b-this.y);c>d?(this.speedX=_.min([this.speed,c]),this.speedY=d/c*this.speedX||0):(this.speedY=_.min([this.speed,d]),this.speedX=c/d*this.speedY||0);a<this.x&&(this.speedX*=-1);b<this.y&&(this.speedY*=-1)},die:function(){this.dead=!0;this.stop()},isDead:function(){return this.dead}})});