define(["vendor/class"],function(){return SpriteManager=Class.extend({init:function(a){var d=this,e=[];this.sprites=[];this.basePath="res/sprites/";(function(){console.info("Loading sprites files...");var c=e.length;_.each(e,function(b){d.load(b,function(){c--;c||(a&&a(),console.info("Sprites loading complete"))})})})()},load:function(a,d){var e=this.basePath+a,c=a.split(".").slice(0,-1).join("."),b=document.createElement("img"),f=this;b.addEventListener("load",function(){console.info(a,"is ready to draw.");
d&&d()},!1);b.addEventListener("error",function(){console.error("Error: "+a+" could not be loaded.");f.sprites[c]=null},!1);b.src=e;this.sprites[c]=b},getSprite:function(a){return!this.sprites[a]?null:this.sprites[a]}})});