define(["vendor/class"],function(){return Storage=Class.extend({init:function(){this.isHaveLocalStorage()&&localStorage.getItem("data")?this.data=JSON.parse(localStorage.getItem("data")):this.reset()},reset:function(){this.data={isAudioEnabled:!0,maxScore:0}},save:function(){this.isHaveLocalStorage()&&localStorage.setItem("data",JSON.stringify(this.data))},clear:function(){this.reset();this.save()},isHaveLocalStorage:function(){return window.localStorage},isHaveProperty:function(a){return!!this.data.hasOwnProperty(a)},
get:function(a){return this.isHaveProperty(a)?this.data[a]:null},setAudioState:function(a){this.data.isAudioEnabled=!!a;this.save()},getAudioState:function(){return this.data.isAudioEnabled},setMaxScore:function(a){if(a>this.data.maxScore)this.data.maxScore=~~a,this.save()},getMaxScore:function(){return this.data.maxScore}})});