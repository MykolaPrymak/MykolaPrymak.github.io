"use strict";angular.module("nrssClientApp",["ngResource","ngRoute"]).config(["$routeProvider","$locationProvider",function(a,b){b.hashPrefix("!"),a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/feeds",{templateUrl:"views/feeds.html",controller:"FeedsCtrl"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).otherwise({redirectTo:"/"})}]).run(["$rootScope","$location","appConfig",function(a,b,c){a.$on("$routeChangeStart",function(d,e){a.showLandingPage=_.contains(["/","/login","/register"],e.originalPath),c.auth===!1&&"authCtrl"!==e.controller&&(d.preventDefault(),b.path("/auth/login"))})}]),angular.module("nrssClientApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("nrssClientApp").controller("FeedsCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("nrssClientApp").controller("NavCtrl",["$scope","$routeParams","$location","appConfig",function(a,b,c,d){a.appConfig=d,a.$location=c,a.isActivePath=function(a){var b=c.path();return"/"===a&&a===b||"/"!==a&&0===b.indexOf(a)?!0:!1},a.topLinks=[{name:"Home",path:"/"},{name:"Feeds",path:"/feeds"},{name:"Employees",path:"/employees"}],a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("nrssClientApp").value("appConfig",{apiBase:"api/v1.0",auth:!0}),angular.module("nrssClientApp").directive("landingBgSwitch",function(){return{restrict:"A",link:function(a,b,c){var d=_.sample(c.landingBgSwitch.split("|"));a.$watch(function(){return b[0].className},function(){b.css({"background-image":b.hasClass("landing")?"url("+d+")":"none"})})}}}),angular.module("nrssClientApp").controller("RegisterCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("nrssClientApp").controller("LoginCtrl",["$scope","$location","Auth",function(a,b,c){a.auth={},a.login=function(){var d=a.loginForm;d.$invalid?d.$setDirty():c.login(a.auth,function(){b.path("/")},function(){a.auth.password="",a.showErrorMessage=!0,a.errorMessage="Login failed"})},a.hideError=function(){a.showErrorMessage=!1},a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("nrssClientApp").service("Auth",["$resource","appConfig",function(a,b){return a(b.apiBase+"/auth/:action",{},{get:{method:"GET"},status:{method:"GET"},login:{method:"POST",params:{action:"login"}},register:{method:"POST",params:{action:"register"}},logout:{method:"GET",params:{action:"logout"}},ping:{method:"GET",params:{action:"ping"}}})}]);